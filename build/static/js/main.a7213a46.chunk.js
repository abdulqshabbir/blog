(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,n){e.exports=n(304)},179:function(e,t,n){},304:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(62),l=n.n(u),c=n(1),o=n.n(c),s=n(8),i=n(13),m=n.n(i),p=function(e){window.localStorage.setItem("username",e.username),window.localStorage.setItem("token",e.token),window.localStorage.setItem("id",e.id)},f=function(){var e=Object(s.a)(o.a.mark(function e(t,n){var a,r,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,m.a.post("".concat("/api","/login"),{username:t,password:n},a);case 4:if(400!==(r=e.sent).status&&401!==r.status){e.next=10;break}return b(),e.abrupt("return",null);case 10:return e.next=12,r.data;case 12:return u=e.sent,p(u),e.abrupt("return",u);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[1,17]])}));return function(t,n){return e.apply(this,arguments)}}(),b=function(){window.localStorage.clear()},g={login:f,logout:b,fetchAllUsers:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat("/api","/users"));case 3:if(200!==(t=e.sent).status){e.next=9;break}return e.next=7,t.data;case 7:return n=e.sent,e.abrupt("return",n);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(){return e.apply(this,arguments)}}(),fetchUserById:function(){var e=Object(s.a)(o.a.mark(function e(t){var n,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat("/api","/users"));case 3:if(200!==(n=e.sent).status){e.next=14;break}return e.next=7,n.data;case 7:if(a=e.sent,r=a.find(function(e){return e.id===t})){e.next=13;break}return e.abrupt("return",null);case 13:return e.abrupt("return",r);case 14:return e.abrupt("return",null);case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[0,17]])}));return function(t){return e.apply(this,arguments)}}()},d={username:null,id:null,token:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return{username:t.username,token:t.token,id:t.id};case"DO_NOT_AUTHENTICATE_USER":case"LOGOUT_USER":return{username:null,id:null,token:null};default:return e}},h=n(9),E=n(31),O=n(2),k=function(){var e=Object(a.useState)(""),t=Object(O.a)(e,2),n=t[0],u=t[1],l=Object(a.useState)(""),c=Object(O.a)(l,2),o=c[0],s=c[1],i=Object(a.useState)(""),p=Object(O.a)(i,2),f=p[0],b=p[1],g=Object(a.useState)(""),d=Object(O.a)(g,2),v=d[0],h=d[1];return r.a.createElement("div",null,r.a.createElement("h3",null,"New user? Sign up using this form. "),r.a.createElement("form",{className:"signup form",onSubmit:function(e){e.preventDefault();var t=e.target.elements.username.value,n=e.target.elements.email.value,a=e.target.elements.password.value,r=e.target.elements.name.value;u(""),s(""),b(""),h(""),m.a.post("http://localhost:5000/api/users",{username:t,password:a,email:n,name:r})}},r.a.createElement("div",null,"Username:",r.a.createElement("input",{type:"text",name:"username",placeholder:"new username here...",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",null,"Password:",r.a.createElement("input",{type:"password",name:"password",placeholder:"new password here...",value:f,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",null,"Email:",r.a.createElement("input",{type:"text",name:"email",placeholder:"new email here...",value:n,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",null,"Name:",r.a.createElement("input",{type:"text",name:"name",placeholder:"What do we call you?",value:v,onChange:function(e){return h(e.target.value)}})),r.a.createElement("input",{type:"submit",value:"create user"})))},w=n(12),j=Object(h.b)(null,function(e){return{attemptToAuthenticateUser:function(t,n){return e(function(e,t){return function(){var n=Object(s.a)(o.a.mark(function n(a){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.login(e,t);case 2:(r=n.sent)&&null!==r.username?a({type:"LOGIN_USER",username:r.username,token:r.token,id:r.id}):a({type:"DO_NOT_AUTHENTICATE_USER"});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}(t,n))}}})(function(e){var t=e.attemptToAuthenticateUser,n=Object(a.useState)(""),u=Object(O.a)(n,2),l=u[0],c=u[1],o=Object(a.useState)(""),s=Object(O.a)(o,2),i=s[0],m=s[1];return r.a.createElement("div",{className:"login form"},r.a.createElement("h3",null,"Log in to Application"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(l,i)}},r.a.createElement("div",null,"Username:",r.a.createElement("input",{type:"text",value:l,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,"Password:",r.a.createElement("input",{type:"password",value:i,onChange:function(e){return m(e.target.value)}})),r.a.createElement("button",{type:"submit"},"login"),r.a.createElement(w.b,{to:"/signup"},"Sign up here")))}),x=null,y={},S={createBlog:function(e){var t=e.title,n=e.author,a=e.url;if(x){var r={title:t,author:n,url:a,likes:0,token:x};m.a.post("".concat("/api","/blogs"),r,y).catch(function(e){return console.log(e)})}},setToken:function(e){x="bearer ".concat(e),y={headers:{Authorization:x}}},updateLikes:function(){var e=Object(s.a)(o.a.mark(function e(t,n){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=10;break}return e.prev=1,a={token:x,likes:n},e.next=5,m.a.put("".concat("/api","/blogs/").concat(t),a,y);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}(),deleteBlog:function(){var e=Object(s.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=9;break}return e.prev=1,e.next=4,m.a.delete("".concat("/api","/blogs/").concat(t),y);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()},U=function(e){var t=Object(a.useState)(""),n=Object(O.a)(t,2),r=n[0],u=n[1];return{type:e,value:r,onChange:function(e){u(e.target.value)},clear:function(){u("")}}},C={isVisible:!1,text:""},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_NOTIFICATION":return{isVisible:!0,text:t.text};case"HIDE_NOTIFICATION":return{isVisible:!1,text:""};default:return e}},I=Object(h.b)(null,function(e){return{showNotification:function(t){return e(function(e){return{type:"SHOW_NOTIFICATION",text:e}}(t))},hideNotification:function(){return e({type:"HIDE_NOTIFICATION"})}}})(function(e){var t=e.user,n=e.showNotification,u=e.hideNotification,l=U("text"),c=U("text"),o=U("text"),s=Object(a.useState)(!1),i=Object(O.a)(s,2),m=i[0],p=i[1];return m?r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),S.setToken(t.token),S.createBlog({title:e.target.elements.title.value,url:e.target.elements.url.value,author:e.target.elements.author.value}),l.clear(),c.clear(),o.clear(),n("this is a notification"),setTimeout(function(){return u()},2e3)}},r.a.createElement("div",null,"Title:",r.a.createElement("input",{type:l.type,name:"title",value:l.value,onChange:l.onChange})),r.a.createElement("div",null,"Author:",r.a.createElement("input",{type:c.type,name:"author",value:c.value,onChange:c.onChange})),r.a.createElement("div",null,"URL:",r.a.createElement("input",{type:o.type,name:"url",value:o.value,onChange:o.onChange})),r.a.createElement("button",{type:"submit"}," Create Blog "))):r.a.createElement("button",{onClick:function(){return p(!0)}}," New Blog ")}),N=(n(179),function(e){var t=e.user,n=e.blog,u=Object(a.useState)(!1),l=Object(O.a)(u,2),c=l[0],o=l[1],s=Object(a.useState)(n.likes),i=Object(O.a)(s,2),m=i[0],p=i[1];return c?r.a.createElement("div",{key:n.id,className:"blog","data-testid":"full-blog-shown",onClick:function(){return o(!1)}},r.a.createElement("h3",null,r.a.createElement(w.b,{to:"/blogs/".concat(n.id)},n.title)),r.a.createElement("p",null,"Created by ",n.author),r.a.createElement("p",null,"Link to full blog article: ",n.url),r.a.createElement("p",null,"Number of likes: ",m," ",r.a.createElement("button",{onClick:function(e){e.stopPropagation(),p(m+1),S.setToken(t.token),S.updateLikes(n.id,m)}},"like")),r.a.createElement("button",{onClick:function(e){e.stopPropagation(),window.confirm("remove ".concat(n.title," by ").concat(n.author))&&(S.setToken(t.token),S.deleteBlog(n.id))}},"Delete Blog")):r.a.createElement("div",{className:"blog","data-testid":"full-blog-hidden",onClick:function(){return o(!0)}},r.a.createElement("p",null,n.title," written by ",n.author))}),_=function(e){return{getAll:function(){var t=Object(s.a)(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("".concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),deleteResource:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n="bearer ".concat(n=t),{headers:{Authorization:n}},e.next=11;break;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}var n},e,null,[[3,8]])}));return function(t,n){return e.apply(this,arguments)}}()}},L=[],A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BLOGS":return t.blogs;default:return e}},B=n(305),R=function(e){e.text;return r.a.createElement(B.a,{positive:!0},r.a.createElement(B.a.Header,null,"The operation was successful"),r.a.createElement("p",null,"You have added a blog to the database. Refresh the page to see the blog. ",""))},G=Object(h.b)(function(e){return{blogs:e.blogs,notification:e.notification,user:e.user}},function(e){return{setBlogs:function(t){return e(function(e){return{type:"SET_BLOGS",blogs:e}}(t))},logoutUser:function(){return e({type:"LOGOUT_USER"})}}})(function(e){var t=e.user,n=e.blogs,u=e.notification,l=e.setBlogs,c=e.logoutUser,i=Object(a.useState)(!0),m=Object(O.a)(i,2),p=m[0],f=m[1],b=_("http://localhost:5000/api/blogs");Object(a.useEffect)(function(){!function(){var e=Object(s.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAll();case 2:t=e.sent,l(t),f(!1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[l]);return p?r.a.createElement("p",null,"Please wait a moment"):r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome, to my Blog Application"),r.a.createElement("h3",null,t.username," just logged in."),r.a.createElement("button",{onClick:function(){window.localStorage.clear(),c()}},"Log out"),u.isVisible?r.a.createElement(R,{text:u.text}):null,r.a.createElement(I,{user:t}),n.sort(function(e,t){return t.likes-e.likes}).map(function(e){return r.a.createElement(N,{user:t,blog:e,key:e.id})}))}),D=Object(h.b)(function(e){return{username:e.user.username}},function(e){return{logoutUser:function(){return e({type:"LOGOUT_USER"})}}})(function(e){var t=e.username,n=e.logoutUser,u=Object(a.useState)([]),l=Object(O.a)(u,2),c=l[0],i=l[1],m=Object(a.useState)(!1),p=Object(O.a)(m,2),f=p[0],b=p[1];Object(a.useEffect)(function(){!function(){var e=Object(s.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.fetchAllUsers();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]);return f?r.a.createElement(E.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement("h1",null,"blogs"),r.a.createElement("p",null,t," is currently logged in"),r.a.createElement("button",{onClick:function(){g.logout(),n(),b(!0)}},"logout"),r.a.createElement("h1",null,"Users"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Number of Blogs")),c.map(function(e){return r.a.createElement("tr",{key:e.username},r.a.createElement("td",null,r.a.createElement(w.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.blogs.length))}))))}),H=n(134),P=n.n(H),F=Object(h.b)(function(e){return{userCurrentlyLoggedIn:e.user}},function(e){return{logoutUser:function(){return e({type:"LOGOUT_USER"})}}})(function(e){var t=e.match,n=e.logoutUser,u=e.userCurrentlyLoggedIn,l=Object(a.useState)(null),c=Object(O.a)(l,2),i=c[0],m=c[1],p=Object(a.useState)(null),f=Object(O.a)(p,2),b=f[0],d=f[1];Object(a.useEffect)(function(){!function(){var e=Object(s.a)(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.fetchUserById(t.params.id);case 2:n=e.sent,m(n);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[t]);return b?r.a.createElement(E.a,{to:"/login"}):i?r.a.createElement("div",null,r.a.createElement("h1",null,"Blogs"),r.a.createElement("p",null,u.username," logged in."),r.a.createElement("button",{onClick:function(){g.logout(),n(),d(!0)}},"logout"),r.a.createElement("h1",null,i.name),r.a.createElement("h3",null,"added blogs"),i.blogs.map(function(e){return r.a.createElement("li",{key:P()()},e.title)})):null}),V=Object(h.b)(function(e){return{user:e.user}},function(e){return{logoutUser:function(){return e({type:"LOGOUT_USER"})}}})(function(e){var t=e.match,n=e.user,u=e.logoutUser,l=Object(a.useState)(null),c=Object(O.a)(l,2),i=c[0],p=c[1],f=t.params.id;Object(a.useEffect)(function(){!function(){var e=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat("http://localhost:5000/api/blogs/","/").concat(t));case 3:n=e.sent,p(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()(f)},[f]);var b=function(){var e=Object(s.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.setToken(n.token);case 3:return e.next=5,S.updateLikes(i.id,i.likes);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();return i?r.a.createElement("div",null,r.a.createElement("h1",null,"Blogs "),r.a.createElement("p",null,n.username," logged in."),r.a.createElement("button",{onClick:u},"logout"),r.a.createElement("h1",null,i.title),r.a.createElement("a",{href:"".concat(i.url)},i.url),r.a.createElement("p",null,i.likes," likes ",r.a.createElement("button",{onClick:b},"like")),r.a.createElement("p",null,"added by ",i.author)):null}),W=n(306),z=Object(h.b)(function(e){return{user:e.user}},function(e){return{logoutUser:function(){return e({type:"LOGOUT_USER"})}}})(function(e){var t=e.user,n=e.logoutUser,u=Object(a.useState)("blogs"),l=Object(O.a)(u,2),c=l[0],o=l[1];return r.a.createElement(W.a,{pointing:!0,secondary:!0},r.a.createElement(w.b,{to:"/blogs"},r.a.createElement(W.a.Item,{name:"blogs",active:"blogs"===c,onClick:function(){return o("blogs")}})),r.a.createElement(w.b,{to:"/users"},r.a.createElement(W.a.Item,{name:"users",active:"users"===c,onClick:function(){return o("users")}})),r.a.createElement(W.a.Item,{name:"".concat(t.username," currently logged in."),position:"right"}),r.a.createElement(W.a.Item,{name:"logout",position:"right",active:"logout"===c,onClick:n}))}),J=Object(h.b)(function(e){return{user:e.user}},function(e){return{loginUser:function(t,n,a){return e(function(e,t,n){return{type:"LOGIN_USER",username:e,token:t,id:n}}(t,n,a))}}})(function(e){var t=e.user,n=e.loginUser;return Object(a.useEffect)(function(){var e=function(){var e=window.localStorage.getItem("username")||null,t=window.localStorage.getItem("token")||null,n=window.localStorage.getItem("id")||null;return e&&t&&n?{username:e,token:t,id:n}:null}();if(null!==e){var t=e.username,a=e.token,r=e.id;n(t,a,r)}},[n]),t&&null!==t.username?r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",render:function(){return r.a.createElement(G,{user:t})}}),r.a.createElement(E.b,{exact:!0,path:"/blogs",render:function(){return r.a.createElement(G,{user:t})}}),r.a.createElement(E.b,{exact:!0,path:"/users",component:D}),r.a.createElement(E.b,{path:"/users/:id",component:F}),r.a.createElement(E.b,{path:"/blogs/:id",component:V}))):r.a.createElement("div",null,r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/signup",component:k}),r.a.createElement(E.b,{path:"/",component:j})))}),Y=n(34),q=Object(Y.c)({user:v,blogs:A,notification:T}),K=n(137),M=n(138),Q=n.n(M),X=Object(Y.a)(K.a,Q.a),Z=Object(Y.d)(q,X);l.a.render(r.a.createElement(h.a,{store:Z},r.a.createElement(w.a,null,r.a.createElement(J,null))),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.a7213a46.chunk.js.map